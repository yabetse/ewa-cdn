$(document).on("knack-scene-render.scene_4",function(e,t){$("#view_60 .kn-button.is-primary").prop("disabled",!0);var a=parseInt(""==$("#view_66 .kn-pivot-calc:eq(1)").text().replace(/,/g,"")?0:$("#view_66 .kn-pivot-calc:eq(1)").text().replace(/,/g,"")),i=parseFloat(""==$("#view_64 .field_91 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_64 .field_91 .kn-detail-body").text().replace(/,/g,"")),l=Array();$("#view_64 .kn-detail.field_82 .kn-detail-body span span span").each(function(){l.push($(this).text())});var r=(new Date).getFullYear()+"-"+((new Date).getMonth()+1),n=Array();$("#view_64 .kn-detail.field_88 .kn-detail-body span span span").each(function(){n.push($(this).text())});for(var d=0;d<n.length;d++)if(n[d]==r)var s=l[d];var o=parseFloat(""==$("#view_65 .field_44 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_65 .field_44 .kn-detail-body").text().replace(/,/g,"")),c=parseFloat(""==$("#view_66 .kn-pivot-calc:eq(0)").text().replace(/,/g,"")?0:$("#view_66 .kn-pivot-calc:eq(0)").text().replace(/,/g,"")),v=parseFloat(""==$("#view_64 .field_89 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_64 .field_89 .kn-detail-body").text().replace(/,/g,"")),_=parseFloat(""==$("#view_65 .field_52 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_65 .field_52 .kn-detail-body").text().replace(/,/g,"")),p=parseFloat(""==$("#view_65 .field_53 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_65 .field_53 .kn-detail-body").text().replace(/,/g,"")),u=parseFloat(""==$("#view_64 .field_87 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_64 .field_87 .kn-detail-body").text().replace(/,/g,"")),f=parseFloat(""==$("#view_64 .field_90 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_64 .field_90 .kn-detail-body").text().replace(/,/g,"")),w=parseFloat(""==$("#view_64 .field_93 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_64 .field_93 .kn-detail-body").text().replace(/,/g,"")),g=parseFloat(""==$("#view_64 .field_94 .kn-detail-body").text().replace(/,/g,"")?0:$("#view_64 .field_94 .kn-detail-body").text().replace(/,/g,""));if(_>0&&u>0)var m=Math.max(_,u);else if(_>0)m=_;else if(u>0)m=u;else m=0;if(p>0&&f>0)var k=Math.min(p,f);else if(p>0)k=p;else if(f>0)k=f;else k=0;var h=$('input[name="view_60-field_92"]:checked').val();if(h.toLowerCase().indexOf("normal")>-1)var b=w;else if(h.toLowerCase().indexOf("fast")>-1)b=g;$("#view_60 #field_63").attr("value",b);var x=calculate_withdrawable(o,c,b,v);$("input[type=radio][name=view_60-field_92]").change(function(){var e=$("#field_18").val(),t=$('input[name="view_60-field_92"]:checked').val();t.toLowerCase().indexOf("normal")>-1?b=w:t.toLowerCase().indexOf("fast")>-1&&(b=g),$("#view_60 #field_63").attr("value",b),x=calculate_withdrawable(o,c,b,v);var l=amount_requested_checks(x,m,k,s,a,i,e);display_message(l)}),$("input#field_18").on("input",function(e){var t=$(this).val(),l=$('input[name="view_60-field_92"]:checked').val();l.toLowerCase().indexOf("normal")>-1?b=w:l.toLowerCase().indexOf("fast")>-1&&(b=g),x=calculate_withdrawable(o,c,b,v);var r=amount_requested_checks(x,m,k,s,a,i,t);display_message(r)})}),calculate_withdrawable=function(e,t,a,i){var l=new Date;return(e*(l.getDate()-1)/new Date(l.getFullYear(),l.getMonth()+1,0).getDate()-t)*i},amount_requested_checks=function(e,t,a,i,l,r,n){var d=new Date<=new Date(i.split("/")[2],i.split("/")[1]-1,i.split("/")[0]),s=r<=0||l<r,o=Math.min(a,e);if(a>0)var c=n>=t&&n<=a&&n<=e;else c=n>=t&&n<=e;return 0==d?{status:!1,error:"Please wait until next month to submit new requests"}:0==s?{status:!1,error:"You have exceeded the maximum number of requests allowed per month"}:0==c&&a>0?{status:!1,error:"Please provide an amount between "+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" and "+o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}:0==c?{status:!1,error:"Please provide an amount greater than "+t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}:{status:!0}},display_message=function(e){if(0==e.status){var t=e.error;$(".error-message-custom").hide(),$(".validation-message-custom").hide(),$("<div class='error-message-custom'><strong>"+t+"</strong></div>").insertAfter($("#view_60 .view-header"))}1==e.status?($(".error-message-custom").hide(),$(".validation-message-custom").hide(),$("<div class='validation-message-custom'><strong>All inputs are correct</strong></div>").insertAfter($("#view_60 .view-header")),$("#view_60 .kn-button.is-primary").prop("disabled",!1)):$("#view_60 .kn-button.is-primary").prop("disabled",!0)},$(document).on("knack-form-submit.view_60",function(e,t,a){$(".error-message-custom").hide(),$(".validation-message-custom").hide()});